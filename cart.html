<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Your Cart</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand"><h1>Global Restaurant</h1></div>
    <div class="controls"><a class="btn" href="index.html">Home</a></div>
  </header>

  <main class="cart-main">
    <h2>Your Cart</h2>
    <div id="cartList"></div>
    <div id="cartActions" class="cart-actions"></div>
  </main>

  <script>
    (function(){
      fetch('data.json').then(r=>r.json()).then(j=>{
        const all = j.countries.flatMap(c=>c.foods);
        const cart = JSON.parse(localStorage.getItem('cart')||'[]');
        const deleted = JSON.parse(localStorage.getItem('deleted')||'[]');
        const list = cart.filter(id=>!deleted.includes(id)).map(id=>all.find(a=>a.id===id)).filter(Boolean);
        const container = document.getElementById('cartList');
        if(list.length===0){
          container.innerHTML = '<p>Your cart is empty.</p>';
          document.getElementById('cartActions').innerHTML = '';
          return;
        }
        container.innerHTML = list.map(item=>`
          <div class="cart-item">
            <img src="${item.image}" alt="${item.name}" />
            <div class="cart-item-info">
              <h4>${item.name}</h4>
              <p>${item.ingredients.slice(0,3).join(', ')}</p>
              <p>Rating: ${item.rating} ‚≠ê</p>
              <button onclick="removeFromCart('${item.id}')">Remove</button>
            </div>
          </div>
        `).join('');
        document.getElementById('cartActions').innerHTML = '<button onclick="checkout()">Checkout (mock)</button>';
      });
    })();

    function removeFromCart(id){
      let c = JSON.parse(localStorage.getItem('cart')||'[]');
      c = c.filter(x=>x!==id);
      localStorage.setItem('cart', JSON.stringify(c));
      location.reload();
    }

    function checkout(){
      // mock checkout: clear cart
      localStorage.setItem('cart','[]');
      alert('Checkout complete (mock). Thank you!');
      location.reload();
    }
  </script>
</body>
</html>
